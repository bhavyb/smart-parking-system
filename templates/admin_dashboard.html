{% extends 'base.html' %} {% block content %}
<h3>Admin Dashboard</h3>
<div class="row">
  <div class="col-md-6">
    <h5>Slots</h5>
    <div class="row">
      {% for slot in slots %}
      <div class="col-6 col-sm-4 col-md-3 mb-3">
        <div
          class="card slot-card {% if slot['is_available'] %}card-available{% else %}card-occupied{% endif %}"
        >
          <div class="card-body text-center">
            <h5 class="card-title">Slot {{ slot['slot_id'] }}</h5>
            <p class="card-text">
              {% if slot['is_available'] %}Available{% else %}Occupied{% endif
              %}
            </p>
            {% if not slot['is_available'] %}
            <form
              method="post"
              action="{{ url_for('free_slot', slot_id=slot['slot_id']) }}"
            >
              <button class="btn btn-sm btn-light mt-2">Free Slot</button>
            </form>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-6">
    <h5>Recent Bookings</h5>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Vehicle</th>
          <th>Slot</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
        {% for b in bookings %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ b['name'] }}</td>
          <td>{{ b['vehicle_no'] }}</td>
          <td>{{ b['slot_no'] }}</td>
          <td>{{ b['booking_time'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
